<template>
  <div class="page no-toolbar" id="userLogin">
    <div class="navbar">
      <div class="navbar-inner bg-color-df">
        <div class="left sliding">
          <a href="#" class="link back" data-panel="left">
            <i class="fa fa-chevron-left color-333"></i>
          </a>
        </div>
        <div class="right">
          <a href="/signin/" class="link" style="color: #333;">注册</a>
        </div>
      </div>
    </div>
    <div class="page-content login-screen-content bg-color-df">
      <div class="login-screen-title">
        <img src="img/app-logo.png">
      </div>
      <form>
        <div class="list">
          <ul>
            <li class="item-content item-input item-input-with-info">
              <div class="item-inner">
                <div class="item-title item-label"><img src="img/user-phone.png">&nbsp;&nbsp;手机</div>
                <div class="item-input-wrap">
                  <input type="text" class="input-with-value" id="demo-username-2" maxlength="11" placeholder="请输入手机号" required validate pattern="[0-9]*" data-error-message="只能输入数字" autofocus>
                  <span class="input-clear-button"></span>
                </div>
              </div>
            </li>
            <li class="item-content item-input">
              <div class="item-inner">
                <div class="item-title item-label"><img src="img/user-pass.png">&nbsp;&nbsp;密码</div>
                <div class="item-input-wrap">
                  <input type="password" class="input-with-value" placeholder="请输入密码" id="demo-password-2" class="">
                </div>
              </div>
            </li>
          </ul>
        </div>

        <div class="block"><a href="/find-pass/">忘记密码？</a></div>

        <div class="list" style="margin: 25px auto;">
          <ul>
            <li>
              <a href="#" class="item-link button list-button" @click="login">登录</a>
            </li>
          </ul>
        </div>
      </form>
    </div>
  </div>
</template>
<script>
  return {
    methods: {

      goBack: function() {
        homeView.router.back()
      },
      login: function () {
        var $ = this.$;
        var app = this.$app;
        var data = {};
        var router = this.$router;
        var username = $('input#demo-username-2').val();
        var password = $('input#demo-password-2').val();
        var regUsername = reg.deleteSpace(username);
        var regPassword = reg.deleteSpace(password);
        if (username==regUsername && password==regPassword) {
          if(reg.checkPhone(username)) {
            data = {
              loginName: username,
              password: password
            };
            login(data);
          } else {
            app.dialog.alert('手机号输入不正确！');
          }
        } else {
          app.dialog.alert('手机号或密码不能含有空格！');
        }
        
      }
    },
    on: {
      pageInit: function() {
        
      },
      pageAfterIn:function(){
        
      }
    }
  }
</script>
